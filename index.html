<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="مشغل JavaScript">
    <meta name="theme-color" content="#2563eb">
    <meta name="description" content="منصة تعليمية متقدمة لتعلم JavaScript مع محرر كود متطور وامتحانات تفاعلية">
    <meta name="keywords" content="JavaScript, تعليم, برمجة, امتحانات">
    <title>مشغل JavaScript | نظام الامتحانات</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="mobile.css">
    <link rel="stylesheet" href="exam-mobile.css">
    <!-- Favicon and social preview -->
    <link rel="icon" href="/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/favicon.svg">
    <meta property="og:type" content="website">
    <meta property="og:title" content="مشغل JavaScript | نظام الامتحانات">
    <meta property="og:description" content="منصة تعليمية متقدمة لتعلم JavaScript مع محرر كود متطور وامتحانات تفاعلية">
    <meta property="og:image" content="/og-image.svg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="مشغل JavaScript | نظام الامتحانات">
    <meta name="twitter:description" content="منصة تعليمية متقدمة لتعلم JavaScript مع محرر كود متطور وامتحانات تفاعلية">
    <meta name="twitter:image" content="/og-image.svg">
    <link rel="image_src" href="/og-image.svg">
    <style>
        /* ====== إعدادات CSS العامة ====== */
        :root {
            /* ألوان الوضع الفاتح */
            --primary-color: #2563eb;
            --primary-light: #3b82f6;
            --primary-dark: #1d4ed8;
            --secondary-color: #7c3aed;
            --accent-color: #ec4899;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --info-color: #06b6d4;
            
            /* ألوان النص والخلفية */
            --text-primary: #000000;
            --text-secondary: #6b7280;
            --text-light: #9ca3af;
            --bg-primary: #ffffff;
            --bg-secondary: #f9fafb;
            --bg-tertiary: #f3f4f6;
            --border-color: #e5e7eb;
            
            /* الظلال */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            /* ألوان الوضع الداكن */
            --primary-color: #3b82f6;
            --primary-light: #60a5fa;
            --primary-dark: #2563eb;
            --secondary-color: #8b5cf6;
            --accent-color: #f472b6;
            --success-color: #34d399;
            --warning-color: #fbbf24;
            --danger-color: #f87171;
            --info-color: #22d3ee;
            
            /* ألوان النص والخلفية */
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --text-light: #9ca3af;
            --bg-primary: #111827;
            --bg-secondary: #1f2937;
            --bg-tertiary: #374151;
            --border-color: #4b5563;
            
            /* الظلال */
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.6);
        }

        /* ====== الأنيميشن الأساسية ====== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes scaleIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        /* ====== إعادة الضبط الأساسية ====== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }

        /* ====== شاشة الترحيب ====== */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        .welcome-screen.fade-out {
            opacity: 0;
            transform: scale(1.1);
        }

        .welcome-content {
            text-align: center;
            color: white;
            transform: translateY(20px);
            opacity: 0;
            animation: welcomeContentIn 1.2s ease 0.3s forwards;
        }

        @keyframes welcomeContentIn {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .welcome-logo {
            width: 120px;
            height: 120px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            animation: float 3s ease-in-out infinite;
        }

        .welcome-logo i {
            font-size: 48px;
            color: white;
            animation: spin 20s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .name-container {
            margin-bottom: 40px;
        }

        .welcome-name {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            background: linear-gradient(45deg, #fff, #f0f0f0, #fff);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradientShift 3s ease infinite;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .welcome-subtitle {
            font-size: 1.2rem;
            opacity: 0;
            animation: subtitleFadeIn 1s ease 1.5s forwards;
            color: rgba(255, 255, 255, 0.9);
        }

        @keyframes subtitleFadeIn {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .loading-bar {
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            margin: 30px auto;
            overflow: hidden;
            opacity: 0;
            animation: loadingBarAppear 0.5s ease 2s forwards;
        }

        @keyframes loadingBarAppear {
            0% { opacity: 0; width: 0; }
            100% { opacity: 1; width: 200px; }
        }

        .loading-progress {
            height: 100%;
            width: 0;
            background: linear-gradient(90deg, #fff, #f0f0f0);
            border-radius: 2px;
            animation: loadingProgress 2s ease 2.5s forwards;
        }

        @keyframes loadingProgress {
            0% { width: 0; }
            100% { width: 100%; }
        }

        /* ====== زر تبديل الثيم ====== */
        .theme-toggle-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .theme-toggle-btn {
            width: 60px;
            height: 30px;
            background: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 30px;
            cursor: pointer;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            transition: all 0.3s;
            box-shadow: var(--shadow-md);
        }

        .theme-toggle-btn:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-lg);
        }

        .theme-toggle-btn i {
            font-size: 14px;
            color: var(--text-secondary);
            z-index: 1;
            transition: color 0.3s;
        }

        .theme-toggle-btn .fa-moon { color: var(--primary-color); }
        .theme-toggle-btn .fa-sun { color: var(--warning-color); }

        .theme-ball {
            position: absolute;
            left: 3px;
            width: 22px;
            height: 22px;
            background: var(--primary-color);
            border-radius: 50%;
            transition: transform 0.3s;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        [data-theme="dark"] .theme-ball {
            transform: translateX(30px);
        }

        /* ====== زر الامتحان الثابت ====== */
        .exam-button-container {
            position: fixed;
            bottom: 30px;
            left: 30px;
            z-index: 999;
        }

        .exam-btn {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 12px;
            box-shadow: 0 10px 25px rgba(139, 92, 246, 0.4);
            transition: all 0.3s ease;
            animation: pulse 2s infinite;
        }

        .exam-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 30px rgba(139, 92, 246, 0.6);
        }

        .exam-btn i {
            font-size: 1.3rem;
        }

        /* ====== نافذة تسجيل الدخول ====== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .modal-container {
            background: var(--bg-primary);
            border-radius: 20px;
            width: 95%;
            max-width: 500px;
            max-height: 90vh;
            overflow: hidden;
            box-shadow: var(--shadow-xl);
            border: 1px solid var(--border-color);
            animation: scaleIn 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .modal-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .modal-header h2 {
            color: white;
            font-size: 2rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .modal-subtitle {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .login-form {
            padding: 25px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            color: var(--text-primary);
            font-weight: 500;
        }

        .form-group label i {
            color: var(--primary-color);
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s;
            outline: none;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 15px;
            margin: 30px 0;
        }

        .submit-btn {
            flex: 1;
            background: linear-gradient(135deg, var(--success-color), #059669);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .submit-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
        }

        .submit-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .cancel-btn {
            flex: 1;
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 2px solid var(--border-color);
            padding: 15px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .cancel-btn:hover {
            background: var(--bg-secondary);
            border-color: var(--danger-color);
            color: var(--danger-color);
        }

        .form-info {
            background: rgba(59, 130, 246, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
        }

        .form-info p {
            margin: 5px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .form-info i {
            color: var(--primary-color);
        }

        /* ====== المحتوى الرئيسي ====== */
        .main-container {
            opacity: 0;
            animation: fadeIn 0.5s ease 4s forwards;
        }

        .main-header {
            background: linear-gradient(135deg, var(--bg-secondary), var(--bg-tertiary));
            padding: 30px 20px;
            border-bottom: 1px solid var(--border-color);
            animation: fadeInDown 0.8s ease 4.2s both;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .header-icon {
            font-size: 2rem;
            color: var(--primary-color);
        }

        .header-title h1 {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .version-badge {
            background: var(--accent-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .header-info {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 30px;
        }

        .developer-card {
            display: flex;
            align-items: center;
            gap: 15px;
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            animation: fadeInLeft 0.8s ease 4.4s both;
            transition: transform 0.3s;
        }

        .developer-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .dev-avatar {
            width: 60px;
            height: 60px;
            background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .dev-info h3 {
            font-size: 1.3rem;
            margin-bottom: 5px;
        }

        .dev-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .idea-creator {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--bg-primary);
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            animation: fadeInRight 0.8s ease 4.4s both;
        }

        .idea-creator i {
            color: var(--warning-color);
            font-size: 1.2rem;
        }

        .team-showcase {
            animation: fadeInUp 0.8s ease 4.6s both;
        }

        .team-showcase h3 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
        }

        .team-list {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
        }

        .team-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 12px;
            min-width: 120px;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s;
        }

        .team-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }

        .team-item i {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 8px;
        }

        .team-item span {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .team-item small {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* ====== محرر الكود ====== */
        .main-content {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        @media (min-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr 1fr;
                gap: 40px;
            }
        }

        .code-editor-section {
            animation: fadeInLeft 0.8s ease 4.8s both;
        }

        .editor-container {
            background: var(--bg-primary);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            transition: all 0.3s;
        }

        .editor-container:hover {
            box-shadow: var(--shadow-xl);
        }

        .editor-header {
            background: var(--bg-secondary);
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        @media (min-width: 768px) {
            .editor-header {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
        }

        .editor-title {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .editor-title h2 {
            font-size: 1.5rem;
            color: var(--text-primary);
        }

        .code-stats {
            background: var(--bg-tertiary);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .editor-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
        }

        .run-btn {
            background: linear-gradient(135deg, var(--success-color), #059669);
            color: white;
        }

        .run-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
        }

        .examples-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
        }

        .examples-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(37, 99, 235, 0.3);
        }

        .clear-btn {
            background: linear-gradient(135deg, var(--danger-color), #dc2626);
            color: white;
        }

        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(239, 68, 68, 0.3);
        }

        .save-btn {
            background: linear-gradient(135deg, var(--info-color), #0891b2);
            color: white;
        }

        .save-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(6, 182, 212, 0.3);
        }

        .editor-body {
            display: flex;
            flex-direction: column;
            height: 500px;
        }

        #code-input {
            flex: 1;
            background: #1e1e1e;
            color: #d4d4d4;
            border: none;
            padding: 20px;
            font-family: 'JetBrains Mono', 'Cascadia Code', 'Fira Code', monospace;
            font-size: 15px;
            line-height: 1.6;
            resize: none;
            outline: none;
            direction: ltr;
            tab-size: 4;
            animation: fadeIn 0.8s ease 5s both;
        }

        #code-input:focus {
            box-shadow: inset 0 0 0 2px var(--primary-color);
        }

        .editor-footer {
            background: var(--bg-secondary);
            padding: 12px 20px;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .language-badge {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--bg-tertiary);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .language-badge i {
            color: #f7df1e;
            font-size: 1.1rem;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .status-indicator i {
            color: var(--success-color);
            font-size: 0.7rem;
            animation: pulse 2s infinite;
        }

        /* ====== منطقة النتيجة ====== */
        .output-section {
            animation: fadeInRight 0.8s ease 4.8s both;
        }

        .output-container {
            background: var(--bg-primary);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border-color);
            height: 500px;
            display: flex;
            flex-direction: column;
        }

        .output-header {
            background: var(--bg-secondary);
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .output-title {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .output-title h2 {
            font-size: 1.5rem;
            color: var(--text-primary);
        }

        .output-title i {
            color: var(--accent-color);
            font-size: 1.2rem;
        }

        .output-controls {
            display: flex;
            gap: 10px;
        }

        .copy-btn {
            background: linear-gradient(135deg, var(--secondary-color), #7c3aed);
            color: white;
        }

        .copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(124, 58, 237, 0.3);
        }

        .clear-output-btn {
            background: linear-gradient(135deg, var(--danger-color), #dc2626);
            color: white;
        }

        .clear-output-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(239, 68, 68, 0.3);
        }

        .output-body {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: var(--bg-secondary);
        }

        .welcome-message {
            background: var(--bg-primary);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary-color);
            display: flex;
            gap: 20px;
            animation: fadeIn 0.8s ease 5s both;
        }

        .message-icon {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            flex-shrink: 0;
        }

        .message-content h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .message-content p {
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .tip {
            background: rgba(59, 130, 246, 0.1);
            padding: 10px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 3px solid var(--primary-color);
        }

        .quick-examples {
            margin-bottom: 25px;
            animation: fadeIn 0.8s ease 5.2s both;
        }

        .quick-examples h4 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-primary);
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        @media (min-width: 768px) {
            .examples-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .example-item {
            background: var(--bg-primary);
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            text-align: center;
        }

        .example-item:hover {
            transform: translateY(-3px);
            border-color: var(--primary-color);
            box-shadow: var(--shadow-md);
        }

        .example-item i {
            font-size: 1.2rem;
            color: var(--primary-color);
        }

        .example-item span {
            font-size: 0.9rem;
            font-weight: 500;
        }

        .features-showcase {
            animation: fadeIn 0.8s ease 5.4s both;
        }

        .features-showcase h4 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-primary);
        }

        .features-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .feature {
            display: flex;
            align-items: center;
            gap: 10px;
            background: var(--bg-primary);
            padding: 12px 15px;
            border-radius: 8px;
            transition: all 0.3s;
        }

        .feature:hover {
            transform: translateX(5px);
            background: rgba(59, 130, 246, 0.05);
        }

        .feature i {
            color: var(--success-color);
        }

        .feature span {
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        /* ====== صفحة الامتحان ====== */
        .exam-page {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-primary);
            z-index: 2000;
            overflow-y: auto;
            animation: fadeIn 0.5s ease;
            display: none;
        }

        .exam-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 25px 30px;
            color: white;
            box-shadow: var(--shadow-lg);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .exam-header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .exam-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .exam-title h1 {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .exam-title i {
            font-size: 2rem;
        }

        .exam-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            backdrop-filter: blur(10px);
        }

        .exam-timer {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px 25px;
            border-radius: 15px;
            min-width: 200px;
            text-align: center;
        }

        .timer-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .timer-display i {
            font-size: 1.5rem;
        }

        .timer-progress {
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #10b981, #34d399);
            width: 100%;
            transition: width 1s linear;
        }

        .student-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(10px);
            min-width: 200px;
        }

        .student-card i {
            font-size: 1.5rem;
        }

        .student-card strong {
            display: block;
            margin-bottom: 4px;
        }

        .student-card small {
            opacity: 0.9;
        }

        .exam-container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: 1fr;
            gap: 30px;
        }

        @media (min-width: 1200px) {
            .exam-container {
                grid-template-columns: 2fr 1fr;
            }
        }

        .questions-container {
            background: var(--bg-primary);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow-lg);
        }

        .questions-list {
            min-height: 500px;
        }

        .question-item {
            background: var(--bg-secondary);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .question-item.active {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .question-number {
            background: var(--primary-color);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
        }

        .question-text {
            flex: 1;
            font-size: 1.2rem;
            line-height: 1.6;
            color: var(--text-primary);
            font-weight: 500;
        }

        .question-points {
            background: var(--accent-color);
            color: white;
            padding: 6px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .option-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 18px 20px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .option-item:hover {
            border-color: var(--primary-color);
            transform: translateX(5px);
        }

        .option-item.selected {
            border-color: var(--primary-color);
            background: rgba(59, 130, 246, 0.05);
        }

        .option-letter {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
            flex-shrink: 0;
        }

        .option-item.selected .option-letter {
            background: var(--primary-color);
            color: white;
        }

        .option-text {
            flex: 1;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .option-check {
            color: var(--success-color);
            font-size: 1.2rem;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .option-item.selected .option-check {
            opacity: 1;
        }

        .questions-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .question-nav-btn {
            width: 40px;
            height: 40px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .question-nav-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
            transform: scale(1.1);
        }

        .question-nav-btn.answered {
            background: var(--success-color);
            border-color: var(--success-color);
            color: white;
        }

        .question-nav-btn.active {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
            transform: scale(1.1);
        }

        .stats-box {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .stat-item:last-child {
            border-bottom: none;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        .stat-value {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        .submit-exam-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--danger-color), #dc2626);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .submit-exam-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(239, 68, 68, 0.3);
        }

        .submit-exam-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        .save-exam-btn {
            width: 100%;
            background: linear-gradient(135deg, var(--info-color), #0891b2);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .save-exam-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(6, 182, 212, 0.3);
        }

        .exit-exam-btn {
            width: 100%;
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            border: 2px solid var(--border-color);
            padding: 15px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: all 0.3s;
        }

        .exit-exam-btn:hover {
            border-color: var(--danger-color);
            color: var(--danger-color);
            background: rgba(239, 68, 68, 0.05);
        }

        /* ====== الفوتر ====== */
        .main-footer {
            background: var(--bg-secondary);
            padding: 40px 20px;
            border-top: 1px solid var(--border-color);
            margin-top: 40px;
            animation: fadeInUp 0.8s ease 5s both;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr;
            gap: 40px;
        }

        @media (min-width: 768px) {
            .footer-content {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .footer-section h3 {
            margin-bottom: 15px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .footer-section p {
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .social-links {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            background: var(--bg-tertiary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-secondary);
            transition: all 0.3s;
            text-decoration: none;
        }

        .social-link:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-3px);
        }

        .team-credits {
            list-style: none;
        }

        .team-credits li {
            padding: 8px 0;
            color: var(--text-secondary);
            border-bottom: 1px solid var(--border-color);
        }

        .team-credits li:last-child {
            border-bottom: none;
        }

        .copyright {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
            font-size: 0.9rem;
            color: var(--text-light);
            text-align: center;
        }

        /* ====== نافذة الأمثلة ====== */
        .modal-filters {
            padding: 20px;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: space-between;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            background: var(--bg-primary);
            color: var(--text-secondary);
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .filter-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }

        .filter-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 300px;
        }

        .search-box i {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        #exampleSearch {
            width: 100%;
            padding: 10px 40px 10px 15px;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            background: var(--bg-primary);
            color: var(--text-primary);
            outline: none;
            transition: all 0.3s;
        }

        #exampleSearch:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .modal-body {
            padding: 25px;
            max-height: 50vh;
            overflow-y: auto;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        @media (max-width: 768px) {
            .modal-body {
                grid-template-columns: 1fr;
            }
        }

        .example-card {
            background: var(--bg-primary);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            border: 1px solid var(--border-color);
            transition: all 0.3s;
            animation: fadeInUp 0.5s ease;
        }

        .example-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
            box-shadow: var(--shadow-lg);
        }

        .example-card h4 {
            color: var(--text-primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.1rem;
        }

        .example-card h4 i {
            color: var(--primary-color);
        }

        .example-card p {
            color: var(--text-secondary);
            margin-bottom: 15px;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .example-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.3s;
        }

        .tag.beginner {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(16, 185, 129, 0.2));
            color: var(--success-color);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .tag.intermediate {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.1), rgba(245, 158, 11, 0.2));
            color: var(--warning-color);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .tag.advanced {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(239, 68, 68, 0.2));
            color: var(--danger-color);
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .tag:hover {
            transform: scale(1.05);
        }

        .modal-footer {
            padding: 20px;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .modal-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .modal-info i {
            color: var(--info-color);
        }

        .random-example-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--accent-color), #db2777);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .random-example-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(236, 72, 153, 0.3);
        }

        /* ====== رسائل مؤقتة ====== */
        .temp-message {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-primary);
            border-left: 4px solid;
            padding: 15px 20px;
            border-radius: 10px;
            box-shadow: var(--shadow-lg);
            z-index: 3000;
            display: flex;
            align-items: center;
            gap: 10px;
            animation: slideInLeft 0.3s ease, fadeOut 0.3s ease 2.7s forwards;
            animation-fill-mode: forwards;
            max-width: 400px;
        }

        @keyframes slideInLeft {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        .temp-message.success {
            border-left-color: var(--success-color);
        }

        .temp-message.error {
            border-left-color: var(--danger-color);
        }

        .temp-message.warning {
            border-left-color: var(--warning-color);
        }

        .temp-message.info {
            border-left-color: var(--info-color);
        }

        /* ====== تصميم متجاوب ====== */
        @media (max-width: 768px) {
            .welcome-name {
                font-size: 2.5rem;
            }
            
            .welcome-logo {
                width: 100px;
                height: 100px;
            }
            
            .welcome-logo i {
                font-size: 40px;
            }
            
            .welcome-subtitle {
                font-size: 1rem;
            }
            
            .loading-bar {
                width: 150px;
            }
            
            .header-title h1 {
                font-size: 1.8rem;
            }
            
            .editor-controls {
                justify-content: center;
            }
            
            .control-btn {
                padding: 8px 15px;
                font-size: 0.85rem;
            }
            
            .examples-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .footer-section {
                text-align: center;
            }
            
            .social-links {
                justify-content: center;
            }
            
            .team-list {
                justify-content: center;
            }
            
            .exam-header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .exam-title, .student-card {
                width: 100%;
                justify-content: center;
            }
            
            .exam-timer {
                order: 3;
                width: 100%;
                margin-top: 10px;
            }
            
            .questions-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            
            .form-actions {
                flex-direction: column;
            }
            
            .exam-btn {
                padding: 12px 20px;
                font-size: 1rem;
            }
        }

        @media (max-width: 480px) {
            .welcome-name {
                font-size: 2rem;
            }
            
            .welcome-logo {
                width: 80px;
                height: 80px;
                margin-bottom: 20px;
            }
            
            .welcome-logo i {
                font-size: 32px;
            }
            
            .welcome-subtitle {
                font-size: 0.9rem;
            }
            
            .loading-bar {
                width: 120px;
            }
            
            .team-list {
                flex-direction: column;
                gap: 10px;
            }
            
            .editor-title {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .control-btn {
                flex: 1;
                justify-content: center;
            }
            
            .examples-grid {
                grid-template-columns: 1fr;
            }
            
            .modal-filters {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-box {
                max-width: none;
            }
        }
    </style>
    <style>
        /* تجاوزات سريعة لصفحة الامتحان عند تمييز body بـ mobile-exam */
        @media (max-width: 768px) {
            body.mobile-exam .exam-header {
                padding: 12px 12px !important;
            }

            body.mobile-exam .exam-header-content {
                max-width: 100% !important;
                padding: 0 8px !important;
                flex-direction: column !important;
                gap: 8px !important;
            }

            body.mobile-exam .exam-timer,
            body.mobile-exam .student-card {
                min-width: auto !important;
                width: 100% !important;
                padding: 8px 10px !important;
            }

            body.mobile-exam .exam-container {
                margin: 8px auto !important;
                padding: 0 8px !important;
                gap: 12px !important;
            }

            body.mobile-exam .questions-container {
                padding: 12px !important;
                border-radius: 10px !important;
                box-shadow: none !important;
            }

            body.mobile-exam .question-item {
                padding: 10px !important;
                margin-bottom: 10px !important;
                border-radius: 8px !important;
            }

            body.mobile-exam .option-item {
                padding: 10px 12px !important;
                gap: 8px !important;
            }

            body.mobile-exam .questions-grid {
                grid-template-columns: repeat(3, 1fr) !important;
                gap: 8px !important;
            }

            body.mobile-exam .question-text {
                font-size: 1rem !important;
                line-height: 1.4 !important;
            }

            body.mobile-exam .exam-btn {
                padding: 10px 12px !important;
                font-size: 0.95rem !important;
            }
        }

        @media (max-width: 480px) {
            body.mobile-exam .questions-grid {
                grid-template-columns: repeat(2, 1fr) !important;
            }

            body.mobile-exam .exam-title h1 {
                font-size: 1.2rem !important;
            }

            body.mobile-exam .timer-display {
                font-size: 1.2rem !important;
            }
        }
        /* ====== أنماط لوحة الأسئلة المحمولة والشريط الجانبى ====== */
        .mobile-nav-controls {
            display: none;
            gap: 8px;
            margin-bottom: 12px;
        }

        .mobile-nav-controls .prev-btn,
        .mobile-nav-controls .next-btn {
            flex: 1;
            padding: 10px 12px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        /* زر الشريط الجانبي */
        .questions-toggle-btn {
            /* مخفي على أجهزة سطح المكتب، يظهر فقط على تابلت/موبايل */
            display: none;
            position: fixed;
            right: 18px;
            bottom: 140px;
            width: 56px;
            height: 56px;
            border-radius: 14px;
            background: linear-gradient(135deg, #7c3aed, #2563eb);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3001;
            box-shadow: 0 8px 20px rgba(37,99,235,0.18);
            border: none;
            transform: translateZ(0);
            transition: transform 150ms ease, box-shadow 150ms ease;
            font-size: 18px;
        }

        .questions-toggle-btn:hover {
            transform: translateY(-4px) scale(1.03);
            box-shadow: 0 12px 30px rgba(37,99,235,0.22);
        }

        .questions-toggle-btn i {
            font-size: 20px;
            line-height: 1;
        }

        .mobile-questions-panel {
            position: fixed;
            right: 0;
            top: 0;
            width: 320px;
            max-width: 90%;
            height: 100vh;
            background: var(--bg-primary);
            box-shadow: -10px 0 30px rgba(0,0,0,0.2);
            transform: translateX(110%);
            transition: transform 0.25s ease;
            z-index: 3000;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .mobile-questions-panel.open {
            transform: translateX(0);
        }

        .mobile-questions-panel .mobile-questions-panel-inner {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            overflow-y: auto;
            padding-bottom: 20px;
        }

        @media (max-width: 480px) {
            .mobile-questions-panel .mobile-questions-panel-inner {
                grid-template-columns: repeat(4, 1fr);
            }

            .mobile-nav-controls { display: flex; }
            /* تصغير زر الشريط الجانبي وحركته على الشاشات الصغيرة */
            .questions-toggle-btn {
                right: 12px;
                bottom: 110px;
                width: 48px;
                height: 48px;
                border-radius: 12px;
                font-size: 16px;
            }

            /* تصغير المساحات العلوية (الوقت/بطاقة الطالب) */
            body.mobile-exam .exam-header {
                padding: 10px 12px !important;
            }

            body.mobile-exam .exam-header-content {
                gap: 6px !important;
            }

            body.mobile-exam .timer-display {
                font-size: 1rem !important;
                font-weight: 700;
            }

            body.mobile-exam .exam-timer {
                padding: 6px 10px !important;
                min-width: auto !important;
            }

            body.mobile-exam .student-card {
                padding: 6px 8px !important;
                font-size: 0.85rem !important;
            }
        }

        /* إظهار زر الشريط الجانبي والتعديلات للتابلت */
        @media (max-width: 1024px) {
            .questions-toggle-btn { display: flex; }

            /* تصغير اللوحة الجانبية على التابلت */
            .mobile-questions-panel { width: 380px; max-width: 86%; }

            /* تصغير مكونات الهيدر (الوقت/بطاقة الطالب) على التابلت */
            body.mobile-exam .exam-header { padding: 12px 16px !important; }
            body.mobile-exam .exam-header-content { gap: 8px !important; }
            body.mobile-exam .exam-timer { padding: 8px 12px !important; }
            body.mobile-exam .student-card { padding: 8px 10px !important; }
            body.mobile-exam .exam-title h1 { font-size: 1.3rem !important; }
        }

        .mobile-questions-panel .question-nav-btn.answered {
            background: var(--success-color);
            border-color: var(--success-color);
            color: white;
        }

    </style>
</head>
<body>
    <!-- شاشة الترحيب -->
    <div id="welcomeScreen" class="welcome-screen">
        <div class="welcome-content">
            <div class="welcome-logo">
                <i class="fas fa-code"></i>
            </div>
            
            <div class="name-container">
                <h1 class="welcome-name">حودا</h1>
                <p class="welcome-subtitle">مشغل JavaScript المتطور</p>
            </div>
            
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- زر الوضع الداكن -->
    <div class="theme-toggle-container">
        <button id="themeToggle" class="theme-toggle-btn">
            <i class="fas fa-moon"></i>
            <i class="fas fa-sun"></i>
            <span class="theme-ball"></span>
        </button>
    </div>

    <!-- زر الامتحان الثابت -->
    <div class="exam-button-container">
        <button class="exam-btn" onclick="openLoginModal()">
            <i class="fas fa-graduation-cap"></i>
            امتحان الآن
        </button>
    </div>

    <!-- نافذة تسجيل الدخول للامتحان -->
    <div id="loginModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2><i class="fas fa-sign-in-alt"></i> تسجيل دخول للامتحان</h2>
                <p class="modal-subtitle">أدخل بيانات الطالب للبدء</p>
                <button class="modal-close" onclick="closeLoginModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="loginForm" class="login-form">
                    <div class="form-group">
                        <label for="studentId">
                            <i class="fas fa-id-card"></i> رقم الطالب (ID)
                        </label>
                        <input type="text" id="studentId" required 
                               placeholder="مثال: 2023001">
                    </div>
                    
                    <div class="form-group">
                        <label for="studentPassword">
                            <i class="fas fa-lock"></i> كلمة المرور
                        </label>
                        <input type="password" id="studentPassword" required 
                               placeholder="أدخل كلمة المرور">
                    </div>
                    
                    <div class="form-group">
                        <label for="examType">
                            <i class="fas fa-file-alt"></i> نوع الامتحان
                        </label>
                        <select id="examType" required>
                            <option value="">اختر نوع الامتحان</option>
                            <option value="javascript_basic">JavaScript أساسيات</option>
                            <option value="javascript_advanced">JavaScript متقدم</option>
                            <option value="html_css">HTML & CSS</option>
                        </select>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="submit-btn">
                            <i class="fas fa-play"></i> بدء الامتحان
                        </button>
                        <button type="button" class="cancel-btn" onclick="closeLoginModal()">
                            <i class="fas fa-times"></i> إلغاء
                        </button>
                    </div>
                    
                    <div class="form-info">
                        <p><i class="fas fa-info-circle"></i> مدة الامتحان: 60 دقيقة (20 سؤال)</p>
                        <p><i class="fas fa-exclamation-triangle"></i> لا يمكن إعادة الامتحان بعد البدء</p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- صفحة الامتحان -->
    <div id="examPage" class="exam-page" style="display: none;">
        <!-- سيتم ملؤها بالجافاسكربت -->
    </div>

    <!-- المحتوى الرئيسي -->
    <div class="main-container" id="mainContent">
        <!-- الهيدر -->
        <header class="main-header">
            <div class="header-content">
                <div class="header-title">
                    <i class="fas fa-code header-icon"></i>
                    <h1>مشغل JavaScript المتطور</h1>
                    <span class="version-badge">v2.0</span>
                </div>
                
                <div class="header-info">
                    <div class="developer-card">
                        <div class="dev-avatar">
                            <i class="fas fa-user"></i>
                        </div>
                        <div class="dev-info">
                            <h3>محمود أحمد سعيد</h3>
                            <p>مطور الرئيسي</p>
                        </div>
                    </div>
        </header>

        <!-- المحتوى الرئيسي -->
        <main class="main-content">
            <!-- محرر الكود -->
            <section class="code-editor-section">
                <div class="editor-container">
                    <div class="editor-header">
                        <div class="editor-title">
                            <h2><i class="fas fa-edit"></i> محرر الكود</h2>
                            <span class="code-stats" id="codeStats">0 سطر, 0 حرف</span>
                        </div>
                        
                        <div class="editor-controls">
                            <button class="control-btn run-btn" onclick="runCode()">
                                <i class="fas fa-play"></i> تشغيل الكود
                                <span class="shortcut">Ctrl+Enter</span>
                            </button>
                            
                            <button class="control-btn examples-btn" onclick="openExamplesModal()">
                                <i class="fas fa-code"></i> أمثلة
                                <span class="shortcut">Ctrl+E</span>
                            </button>
                            
                            <button class="control-btn save-btn" onclick="saveCurrentCode()">
                                <i class="fas fa-save"></i> حفظ
                                <span class="shortcut">Ctrl+S</span>
                            </button>
                            
                            <button class="control-btn clear-btn" onclick="clearCode()">
                                <i class="fas fa-redo"></i> مسح
                                <span class="shortcut">Ctrl+L</span>
                            </button>
                        </div>
                    </div>
                    
                    <div class="editor-body">
                        <textarea id="code-input" spellcheck="false" placeholder="اكتب كود JavaScript هنا...">// جرب أي كود JavaScript
console.log(5 + 5); // سيطبع 10

// يمكنك تجربة:
// 1. العمليات الحسابية
console.log(10 * 2); // 20

// 2. الدوال
function greet(name) {
    return "مرحباً " + name;
}
console.log(greet("محمود"));

// 3. المصفوفات
let numbers = [1, 2, 3, 4, 5];
console.log("مجموع المصفوفة:", numbers.reduce((a, b) => a + b, 0));

// 4. الشروط
let age = 20;
if (age >= 18) {
    console.log("يمكنك التصويت");
} else {
    console.log("لا يمكنك التصويت");
}</textarea>
                    </div>
                    
                    <div class="editor-footer">
                        <div class="language-badge">
                            <i class="fab fa-js-square"></i>
                            <span>JavaScript ES6+</span>
                        </div>
                        
                        <div class="status-indicator">
                            <i class="fas fa-circle"></i>
                            <span id="status">جاهز</span>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- منطقة النتيجة -->
            <section class="output-section">
                <div class="output-container">
                    <div class="output-header">
                        <div class="output-title">
                            <i class="fas fa-terminal"></i>
                            <h2>النتيجة</h2>
                        </div>
                        
                        <div class="output-controls">
                            <button class="control-btn copy-btn" onclick="copyOutput()">
                                <i class="fas fa-copy"></i> نسخ
                            </button>
                            <button class="control-btn clear-output-btn" onclick="clearOutput()">
                                <i class="fas fa-trash"></i> مسح
                            </button>
                        </div>
                    </div>
                    
                    <div class="output-body">
                        <div id="output">
                            <div class="welcome-message">
                                <div class="message-icon">
                                    <i class="fas fa-code"></i>
                                </div>
                                <div class="message-content">
                                    <h3>مرحباً في مشغل JavaScript! 👋</h3>
                                    <p>اكتب كود JavaScript في المحرر على اليسار واضغط على زر "تشغيل الكود" لتنفيذه.</p>
                                    <p>يمكنك استخدام مكتبة الأمثلة لتحميل أمثلة جاهزة.</p>
                                    <div class="tip">
                                        <strong>💡 نصيحة:</strong> اضغط Ctrl+Enter لتشغيل الكود بسرعة
                                    </div>
                                </div>
                            </div>
                            
                            <div class="quick-examples">
                                <h4><i class="fas fa-bolt"></i> أمثلة سريعة</h4>
                                <div class="examples-grid">
                                    <div class="example-item" onclick="loadQuickExample('calc')">
                                        <i class="fas fa-calculator"></i>
                                        <span>حساب</span>
                                    </div>
                                    <div class="example-item" onclick="loadQuickExample('loop')">
                                        <i class="fas fa-sync-alt"></i>
                                        <span>حلقات</span>
                                    </div>
                                    <div class="example-item" onclick="loadQuickExample('array')">
                                        <i class="fas fa-list"></i>
                                        <span>مصفوفات</span>
                                    </div>
                                    <div class="example-item" onclick="loadQuickExample('function')">
                                        <i class="fas fa-function"></i>
                                        <span>دوال</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="features-showcase">
                                <h4><i class="fas fa-star"></i> ميزات المشغل</h4>
                                <div class="features-list">
                                    <div class="feature">
                                        <i class="fas fa-check-circle"></i>
                                        <span>تشغيل مباشر للكود</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-check-circle"></i>
                                        <span>عرض النتائج فوراً</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-check-circle"></i>
                                        <span>وضع فاتح/داكن</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-check-circle"></i>
                                        <span>أمثلة تفاعلية</span>
                                    </div>
                                    <div class="feature">
                                        <i class="fas fa-check-circle"></i>
                                        <span>حفظ الكود تلقائياً</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- الفوتر -->
        <footer class="main-footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h3><i class="fas fa-info-circle"></i> عن المشروع</h3>
                    <p>مشغل JavaScript المتطور هو أداة تتيح لك كتابة وتنفيذ كود JavaScript مباشرة في المتصفح.</p>
                    <p>تم تطويره لمساعدة المبرمجين والمبتدئين في تعلم وتجربة JavaScript.</p>
                    <div class="social-links">
                        <a href="#" class="social-link"><i class="fab fa-github"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-link"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3><i class="fas fa-users"></i> المطور</h3>
                    <ul class="team-credits">
                        <li>محمود أحمد سعيد - المطور الرئيسي</li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3><i class="fas fa-mobile-alt"></i> المنصات المدعومة</h3>
                    <div class="platforms">
                        <div class="platform">
                            <i class="fas fa-mobile-alt"></i>
                            <span>الهواتف</span>
                        </div>
                        <div class="platform">
                            <i class="fas fa-tablet-alt"></i>
                            <span>التابلت</span>
                        </div>
                        <div class="platform">
                            <i class="fas fa-desktop"></i>
                            <span>الكمبيوتر</span>
                        </div>
                    </div>
                    <p>يعمل على جميع المتصفحات الحديثة</p>
                </div>
            </div>
            
            <div class="copyright">
                <p>© 2026 مشغل JavaScript المتطور - جميع الحقوق محفوظة</p>
            </div>
        </footer>
    </div>

    <!-- نافذة الأمثلة -->
    <div id="examplesModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-header">
                <h2><i class="fas fa-code"></i> مكتبة الأمثلة التفاعلية</h2>
                <p class="modal-subtitle">اختر مثالاً لتجربته في المحرر</p>
                <button class="modal-close" onclick="closeExamplesModal()">&times;</button>
            </div>
            
            <div class="modal-filters">
                <div class="filter-group">
                    <span class="filter-label">المستوى:</span>
                    <button class="filter-btn active" data-filter="all">الكل</button>
                    <button class="filter-btn" data-filter="beginner">مبتدئ</button>
                    <button class="filter-btn" data-filter="intermediate">متوسط</button>
                    <button class="filter-btn" data-filter="advanced">متقدم</button>
                </div>
                
                <div class="search-box">
                    <input type="text" id="exampleSearch" placeholder="بحث في الأمثلة...">
                    <i class="fas fa-search"></i>
                </div>
            </div>
            
            <div class="modal-body" id="examplesContainer">
                <!-- الأمثلة ستظهر هنا عبر JavaScript -->
            </div>
            
            <div class="modal-footer">
                <div class="modal-info">
                    <i class="fas fa-info-circle"></i>
                    <span>انقر على أي مثال لتحميله في المحرر</span>
                </div>
                <button class="random-example-btn" onclick="loadRandomExample()">
                    <i class="fas fa-random"></i> مثال عشوائي
                </button>
            </div>
        </div>
    </div>

    <script>
        // =============================================
        // نظام الامتحانات
        // =============================================

        // بيانات الطلاب المحلية
        const students = {
            '2023001': { password: 'pass123', name: 'محمود أحمد', grade: 'العاشر' },
            '2023002': { password: 'pass456', name: 'سلمي سيد', grade: 'العاشر' },
            'test': { password: '123', name: 'طالب تجريبي', grade: 'العاشر' },
            'student1': { password: '12345', name: 'أحمد محمد', grade: 'الحادي عشر' },
            'student2': { password: '54321', name: 'سارة علي', grade: 'الثاني عشر' },
            '470605567': { password: 'p9_tpqNY', name: 'محمود احمد سعيد', grade: 'اولي ثانوي' }
        };

        // أسئلة JavaScript أساسيات
        const javascriptBasicQuestions = [
            {
                id: 1,
                question: "ما هي نتيجة تنفيذ الكود التالي: console.log(typeof 42);",
                options: ["'number'", "'string'", "'object'", "'undefined'"],
                correct: 0,
                points: 5
            },
            {
                id: 2,
                question: "ما هي الدالة المستخدمة لتحويل نص إلى عدد في JavaScript؟",
                options: ["parseInt()", "toString()", "Number()", "كل ما سبق"],
                correct: 3,
                points: 5
            },
            {
                id: 3,
                question: "كيف تعرف متغيراً لا يمكن تغيير قيمته؟",
                options: ["var", "let", "const", "static"],
                correct: 2,
                points: 5
            },
            {
                id: 4,
                question: "ما هي نتيجة: 3 == '3' في JavaScript؟",
                options: ["true", "false", "undefined", "خطأ"],
                correct: 0,
                points: 5
            },
            {
                id: 5,
                question: "كيف تضيف عنصراً إلى نهاية مصفوفة؟",
                options: ["push()", "pop()", "shift()", "unshift()"],
                correct: 0,
                points: 5
            },
            {
                id: 6,
                question: "ما هو الفرق بين == و === في JavaScript؟",
                options: [
                    "لا فرق",
                    "== تقارن القيم فقط، === تقارن القيم والنوع",
                    "=== تقارن القيم فقط، == تقارن القيم والنوع",
                    "== تستخدم للأرقام فقط"
                ],
                correct: 1,
                points: 5
            },
            {
                id: 7,
                question: "كيف تكتب دالة سهم (Arrow Function)؟",
                options: [
                    "function() {}",
                    "() => {}",
                    "arrow function() {}",
                    "def function() {}"
                ],
                correct: 1,
                points: 5
            },
            {
                id: 8,
                question: "ما هي نتيجة: console.log(1 + '1')؟",
                options: ["2", "11", "undefined", "خطأ"],
                correct: 1,
                points: 5
            },
            {
                id: 9,
                question: "كيف تتحقق مما إذا كان المتغير غير معرف؟",
                options: [
                    "typeof x === 'undefined'",
                    "x === undefined",
                    "x === null",
                    "الخياران الأول والثاني"
                ],
                correct: 3,
                points: 5
            },
            {
                id: 10,
                question: "ما هي الدالة المستخدمة لتنفيذ كود بعد فترة زمنية؟",
                options: ["setInterval()", "setTimeout()", "wait()", "delay()"],
                correct: 1,
                points: 5
            },
            {
                id: 11,
                question: "كيف تحول نص إلى أحرف كبيرة؟",
                options: ["toUpperCase()", "toLowercase()", "capitalize()", "upper()"],
                correct: 0,
                points: 5
            },
            {
                id: 12,
                question: "ما هي قيمة: Boolean('')؟",
                options: ["true", "false", "undefined", "null"],
                correct: 1,
                points: 5
            },
            {
                id: 13,
                question: "كيف تحصل على طول مصفوفة؟",
                options: ["array.size", "array.length", "array.count", "array.items"],
                correct: 1,
                points: 5
            },
            {
                id: 14,
                question: "ما هي نتيجة: console.log([] == [])؟",
                options: ["true", "false", "undefined", "خطأ"],
                correct: 1,
                points: 5
            },
            {
                id: 15,
                question: "كيف تكتب تعليق في JavaScript؟",
                options: [
                    "// تعليق",
                    "/* تعليق */",
                    "# تعليق",
                    "الخياران الأول والثاني"
                ],
                correct: 3,
                points: 5
            },
            {
                id: 16,
                question: "ما هو نوع البيانات الذي يعيده typeof null؟",
                options: ["'null'", "'object'", "'undefined'", "'number'"],
                correct: 1,
                points: 5
            },
            {
                id: 17,
                question: "كيف تنشئ كائن في JavaScript؟",
                options: [
                    "let obj = {}",
                    "let obj = new Object()",
                    "let obj = Object.create()",
                    "كل ما سبق"
                ],
                correct: 3,
                points: 5
            },
            {
                id: 18,
                question: "ما هي نتيجة: console.log(0.1 + 0.2 === 0.3)؟",
                options: ["true", "false", "undefined", "خطأ"],
                correct: 1,
                points: 5
            },
            {
                id: 19,
                question: "كيف تحذف عنصراً من مصفوفة باستخدام index؟",
                options: ["delete", "splice()", "remove()", "pop()"],
                correct: 1,
                points: 5
            },
            {
                id: 20,
                question: "ما هي الدالة المستخدمة لتحويل كائن إلى JSON؟",
                options: ["JSON.parse()", "JSON.stringify()", "toJSON()", "parseJSON()"],
                correct: 1,
                points: 5
            }
        ];

        // متغيرات النظام
        let examTimer = null;
        let examTimeLeft = 3600;
        let currentQuestion = 0;
        let examAnswers = {};
        let currentStudent = null;
        let currentExamType = '';

        // =============================================
        // دوال الامتحان
        // =============================================

        function openLoginModal() {
            document.getElementById('loginModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeLoginModal() {
            document.getElementById('loginModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // تسجيل الدخول
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const studentId = document.getElementById('studentId').value.trim();
            const password = document.getElementById('studentPassword').value.trim();
            const examType = document.getElementById('examType').value;
            
            if (!studentId || !password || !examType) {
                showMessage('الرجاء ملء جميع الحقول', 'error');
                return;
            }
            
            // التحقق من بيانات الطالب
            const student = students[studentId];
            
            if (!student || student.password !== password) {
                showMessage('رقم الطالب أو كلمة المرور غير صحيحة', 'error');
                return;
            }
            
            // تعطيل زر الإرسال
            const submitBtn = document.querySelector('.submit-btn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري التحميل...';
            
            // نجاح تسجيل الدخول
            currentStudent = {
                id: studentId,
                name: student.name,
                grade: student.grade
            };
            
            currentExamType = examType;
            
            setTimeout(() => {
                closeLoginModal();
                startExam();
                
                // إعادة تمكين الزر
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-play"></i> بدء الامتحان';
            }, 1000);
        });

        function startExam() {
            // إخفاء المحتوى الرئيسي
            document.getElementById('mainContent').style.display = 'none';
            
            // إعداد صفحة الامتحان
            const examPage = document.getElementById('examPage');
            examPage.innerHTML = '';
            
            // إنشاء واجهة الامتحان
            examPage.innerHTML = `
                <div class="exam-header">
                    <div class="exam-header-content">
                        <div class="exam-title">
                            <i class="fas fa-graduation-cap"></i>
                            <h1>امتحان JavaScript أساسيات</h1>
                            <span class="exam-badge">مستوى: أساسي</span>
                        </div>
                        
                        <div class="exam-timer">
                            <div class="timer-display">
                                <i class="fas fa-clock"></i>
                                <span id="timer">60:00</span>
                            </div>
                            <div class="timer-progress">
                                <div class="progress-bar"></div>
                            </div>
                        </div>
                        
                        <div class="student-info">
                            <div class="student-card">
                                <i class="fas fa-user"></i>
                                <div>
                                    <strong id="studentName">${currentStudent.name}</strong>
                                    <small>ID: ${currentStudent.id} | الصف: ${currentStudent.grade}</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="exam-container">
                    <div class="questions-container">
                        <div class="questions-list" id="questionsList">
                            <!-- الأسئلة ستظهر هنا -->
                        </div>
                    </div>
                    
                    <div class="exam-controls">
                        <div class="controls-section">
                            <h3><i class="fas fa-list-ol"></i> الأسئلة</h3>
                            <div class="questions-grid" id="questionsNav">
                                <!-- أزرار التنقل بين الأسئلة -->
                            </div>
                        </div>
                        
                        <div class="controls-section">
                            <h3><i class="fas fa-chart-bar"></i> الإحصائيات</h3>
                            <div class="stats-box">
                                <div class="stat-item">
                                    <span class="stat-label">الأسئلة</span>
                                    <span class="stat-value">20/20</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">تمت الإجابة</span>
                                    <span class="stat-value" id="answeredCount">0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">متبقي</span>
                                    <span class="stat-value" id="remainingCount">20</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="controls-section">
                            <button class="control-btn submit-exam-btn" onclick="submitExam()">
                                <i class="fas fa-paper-plane"></i> تسليم الامتحان
                            </button>
                            <button class="control-btn save-exam-btn" onclick="saveExamProgress()">
                                <i class="fas fa-save"></i> حفظ التقدم
                            </button>
                            <button class="control-btn exit-exam-btn" onclick="exitExam()">
                                <i class="fas fa-sign-out-alt"></i> خروج
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // إظهار صفحة الامتحان
            examPage.style.display = 'block';
            
            // تهيئة الامتحان
            initExam();
        }

        function initExam() {
            examTimeLeft = 3600;
            currentQuestion = 0;
            examAnswers = {};
            
            // عرض الأسئلة
            renderQuestions();
            
            // عرض أزرار التنقل
            renderNavigation();

            // إعداد ضوابط الجوال (التالي/خلف + شريط الأسئلة)
            setupMobileQuestionControls();
            
            // بدء المؤقت
            startTimer();
            
            // تحديث الإحصائيات
            updateStats();
            
            showMessage('تم بدء الامتحان. لديك 60 دقيقة', 'success');
        }

        function renderQuestions() {
            const container = document.getElementById('questionsList');
            container.innerHTML = '';
            
            javascriptBasicQuestions.forEach((question, index) => {
                const questionElement = document.createElement('div');
                questionElement.className = `question-item ${index === currentQuestion ? 'active' : ''}`;
                questionElement.style.display = index === currentQuestion ? 'block' : 'none';
                
                questionElement.innerHTML = `
                    <div class="question-header">
                        <div class="question-number">${index + 1}</div>
                        <div class="question-text">${question.question}</div>
                        <div class="question-points">${question.points} نقطة</div>
                    </div>
                    
                    <div class="options-container">
                        ${question.options.map((option, optIndex) => `
                            <div class="option-item ${examAnswers[index] === optIndex ? 'selected' : ''}" 
                                 onclick="selectAnswer(${index}, ${optIndex})">
                                <div class="option-letter">${String.fromCharCode(65 + optIndex)}</div>
                                <div class="option-text">${option}</div>
                                ${examAnswers[index] === optIndex ? '<i class="fas fa-check option-check"></i>' : ''}
                            </div>
                        `).join('')}
                    </div>
                `;
                
                container.appendChild(questionElement);
            });
        }

        function selectAnswer(questionIndex, optionIndex) {
            examAnswers[questionIndex] = optionIndex;
            
            // تحديث عرض السؤال
            const questionElement = document.querySelectorAll('.question-item')[questionIndex];
            if (questionElement) {
                const options = questionElement.querySelectorAll('.option-item');
                options.forEach((option, index) => {
                    option.classList.toggle('selected', index === optionIndex);
                });
            }
            
            // تحديث أزرار التنقل
            const navButton = document.querySelectorAll('.question-nav-btn')[questionIndex];
            if (navButton) {
                navButton.classList.add('answered');
            }
            
            updateStats();
            // تحديث عرض لوحة التنقل المحمولة إن وُجدت
            if (typeof updateMobileNavAnswered === 'function') updateMobileNavAnswered();
        }

        function navigateToQuestion(index) {
            // إخفاء السؤال الحالي
            const currentElement = document.querySelector('.question-item.active');
            if (currentElement) {
                currentElement.classList.remove('active');
                currentElement.style.display = 'none';
            }
            
            // تحديث السؤال الحالي
            currentQuestion = index;
            
            // إظهار السؤال الجديد
            const newElement = document.querySelectorAll('.question-item')[index];
            if (newElement) {
                newElement.classList.add('active');
                newElement.style.display = 'block';
            }
            
            // تحديث أزرار التنقل
            document.querySelectorAll('.question-nav-btn').forEach((btn, i) => {
                btn.classList.remove('active');
                if (i === index) btn.classList.add('active');
            });

            // تحديث لوحة التنقل المحمولة
            if (typeof updateMobileNavAnswered === 'function') updateMobileNavAnswered();
        }

        function renderNavigation() {
            const container = document.getElementById('questionsNav');
            container.innerHTML = '';
            
            for (let i = 0; i < javascriptBasicQuestions.length; i++) {
                const button = document.createElement('button');
                button.className = `question-nav-btn ${i === currentQuestion ? 'active' : ''} 
                                  ${examAnswers[i] !== undefined ? 'answered' : ''}`;
                button.textContent = i + 1;
                button.onclick = () => navigateToQuestion(i);
                
                container.appendChild(button);
            }
            // تحديث لوحة التنقل المحمولة إن كانت موجودة
            if (typeof renderNavigationMobile === 'function') renderNavigationMobile();
        }

        /* ====== وظائف التحكم المحمول لعرض التالي/خلف ولوحة الأسئلة ====== */
        function setupMobileQuestionControls() {
            // إظهار/إخفاء نسخة التنقل الافتراضية على الشاشات الصغيرة
            const isMobile = window.innerWidth <= 768 || document.body.classList.contains('mobile-exam');
            const qNav = document.getElementById('questionsNav');
            if (qNav) qNav.style.display = isMobile ? 'none' : '';

            // إضافة أزرار التالي/خلف أعلى الحاوية (مرة واحدة)
            if (!document.querySelector('.mobile-nav-controls')) {
                const controls = document.createElement('div');
                controls.className = 'mobile-nav-controls';
                controls.innerHTML = `
                    <button class="prev-btn control-btn" id="prevQuestionBtn" onclick="navigateToQuestion(Math.max(0, currentQuestion-1))">خلف</button>
                    <button class="next-btn control-btn" id="nextQuestionBtn" onclick="navigateToQuestion(Math.min(javascriptBasicQuestions.length-1, currentQuestion+1))">التالي</button>
                `;
                const firstControls = document.querySelector('.exam-container .questions-container');
                if (firstControls) firstControls.insertBefore(controls, firstControls.firstChild);
            }

            // زر الشريط الجانبي
            if (!document.getElementById('questionsToggleBtn')) {
                const toggleBtn = document.createElement('button');
                toggleBtn.id = 'questionsToggleBtn';
                toggleBtn.className = 'questions-toggle-btn';
                toggleBtn.innerHTML = '<i class="fas fa-list"></i>';
                toggleBtn.onclick = () => toggleMobileQuestionsPanel();
                document.body.appendChild(toggleBtn);

                const panel = document.createElement('div');
                panel.id = 'mobileQuestionsPanel';
                panel.className = 'mobile-questions-panel';
                panel.innerHTML = '<div class="mobile-questions-panel-inner" id="mobileQuestionsInner"></div>';
                document.body.appendChild(panel);
            }

            renderNavigationMobile();
            if (typeof updateMobileNavAnswered === 'function') updateMobileNavAnswered();
        }

        function renderNavigationMobile() {
            const mobileInner = document.getElementById('mobileQuestionsInner');
            if (!mobileInner) return;
            mobileInner.innerHTML = '';
            for (let i = 0; i < javascriptBasicQuestions.length; i++) {
                const btn = document.createElement('button');
                btn.className = `question-nav-btn ${i === currentQuestion ? 'active' : ''} ${examAnswers[i] !== undefined ? 'answered' : ''}`;
                btn.textContent = i + 1;
                btn.onclick = (e) => { navigateToQuestion(i); toggleMobileQuestionsPanel(false); };
                mobileInner.appendChild(btn);
            }
        }

        function toggleMobileQuestionsPanel(force) {
            const panel = document.getElementById('mobileQuestionsPanel');
            if (!panel) return;
            if (typeof force === 'boolean') {
                if (force) panel.classList.add('open'); else panel.classList.remove('open');
            } else {
                panel.classList.toggle('open');
            }
            if (panel.classList.contains('open')) renderNavigationMobile();
        }

        function updateMobileNavAnswered() {
            const mobileInner = document.getElementById('mobileQuestionsInner');
            if (!mobileInner) return;
            const buttons = mobileInner.querySelectorAll('.question-nav-btn');
            buttons.forEach((btn, i) => {
                btn.classList.toggle('answered', examAnswers[i] !== undefined);
                btn.classList.toggle('active', i === currentQuestion);
            });
        }

        function startTimer() {
            if (examTimer) clearInterval(examTimer);
            
            examTimer = setInterval(() => {
                examTimeLeft--;
                
                const minutes = Math.floor(examTimeLeft / 60);
                const seconds = examTimeLeft % 60;
                document.getElementById('timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // تحديث شريط التقدم
                const progressBar = document.querySelector('.progress-bar');
                if (progressBar) {
                    const percentage = (examTimeLeft / 3600) * 100;
                    progressBar.style.width = `${percentage}%`;
                    
                    if (percentage < 25) {
                        progressBar.style.background = 'linear-gradient(90deg, #ef4444, #f87171)';
                    } else if (percentage < 50) {
                        progressBar.style.background = 'linear-gradient(90deg, #f59e0b, #fbbf24)';
                    }
                }
                
                // تحذيرات الوقت
                if (examTimeLeft === 300) {
                    showTimeWarning('5 دقائق متبقية فقط!');
                } else if (examTimeLeft === 60) {
                    showTimeWarning('دقيقة واحدة متبقية!');
                }
                
                // انتهاء الوقت
                if (examTimeLeft <= 0) {
                    clearInterval(examTimer);
                    submitExam();
                }
            }, 1000);
        }

        function updateStats() {
            const answeredCount = Object.keys(examAnswers).length;
            const remainingCount = javascriptBasicQuestions.length - answeredCount;
            
            document.getElementById('answeredCount').textContent = answeredCount;
            document.getElementById('remainingCount').textContent = remainingCount;
        }

        function submitExam() {
            if (!confirm('هل أنت متأكد من تسليم الامتحان؟ لا يمكن التراجع.')) {
                return;
            }
            
            clearInterval(examTimer);
            
            // تعطيل زر التسليم
            const submitBtn = document.querySelector('.submit-exam-btn');
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> جاري التسليم...';
            
            // حساب النتيجة
            const result = calculateResult();
            
            setTimeout(() => {
                // إعادة تمكين الزر
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> تسليم الامتحان';
                
                // عرض النتائج
                showResults(result);
            }, 1500);
        }

        function calculateResult() {
            let totalScore = 0;
            let correctAnswers = 0;
            let wrongAnswers = 0;
            let unanswered = 0;
            
            javascriptBasicQuestions.forEach((question, index) => {
                const userAnswer = examAnswers[index];
                
                if (userAnswer === undefined) {
                    unanswered++;
                } else if (userAnswer === question.correct) {
                    correctAnswers++;
                    totalScore += question.points;
                } else {
                    wrongAnswers++;
                }
            });
            
            const percentage = Math.round((totalScore / 100) * 100);
            
            return {
                totalScore,
                correctAnswers,
                wrongAnswers,
                unanswered,
                totalQuestions: javascriptBasicQuestions.length,
                percentage,
                grade: getGrade(percentage)
            };
        }

        function getGrade(percentage) {
            if (percentage >= 90) return 'ممتاز';
            if (percentage >= 80) return 'جيد جداً';
            if (percentage >= 70) return 'جيد';
            if (percentage >= 60) return 'مقبول';
            return 'راسب';
        }

        function showResults(result) {
            const examPage = document.getElementById('examPage');
            examPage.innerHTML = '';
            
            examPage.innerHTML = `
                <div style="padding: 40px 20px; max-width: 800px; margin: 0 auto;">
                    <div style="text-align: center; margin-bottom: 40px;">
                        <div style="font-size: 4rem; color: #10b981; margin-bottom: 20px;">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <h1 style="font-size: 2.5rem; margin-bottom: 10px; color: var(--text-primary);">نتيجة الامتحان</h1>
                        <div style="background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; padding: 15px 40px; border-radius: 50px; font-size: 1.8rem; font-weight: bold; display: inline-block; margin: 20px 0;">
                            ${result.totalScore} / 100
                        </div>
                        <p style="font-size: 1.2rem; color: var(--text-secondary);">${result.grade} - ${result.percentage}%</p>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin: 40px 0;">
                        <div style="background: var(--bg-secondary); padding: 25px; border-radius: 15px; text-align: center;">
                            <div style="font-size: 2.5rem; color: #10b981; font-weight: bold; margin-bottom: 10px;">${result.correctAnswers}</div>
                            <div style="color: var(--text-secondary);">إجابات صحيحة</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 25px; border-radius: 15px; text-align: center;">
                            <div style="font-size: 2.5rem; color: #ef4444; font-weight: bold; margin-bottom: 10px;">${result.wrongAnswers}</div>
                            <div style="color: var(--text-secondary);">إجابات خاطئة</div>
                        </div>
                        <div style="background: var(--bg-secondary); padding: 25px; border-radius: 15px; text-align: center;">
                            <div style="font-size: 2.5rem; color: var(--text-secondary); font-weight: bold; margin-bottom: 10px;">${result.unanswered}</div>
                            <div style="color: var(--text-secondary);">غير مجاب</div>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 40px;">
                        <button onclick="restartExam()" style="background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: white; border: none; padding: 15px 40px; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; margin: 10px;">
                            <i class="fas fa-redo"></i> امتحان جديد
                        </button>
                        <button onclick="returnToHome()" style="background: var(--bg-tertiary); color: var(--text-secondary); border: 2px solid var(--border-color); padding: 15px 40px; border-radius: 12px; font-size: 1.1rem; font-weight: 600; cursor: pointer; margin: 10px;">
                            <i class="fas fa-home"></i> العودة للرئيسية
                        </button>
                    </div>
                </div>
            `;
        }

        function saveExamProgress() {
            const progress = {
                student: currentStudent,
                answers: examAnswers,
                timeLeft: examTimeLeft,
                timestamp: new Date().toISOString()
            };
            
            localStorage.setItem('examProgress', JSON.stringify(progress));
            showMessage('تم حفظ تقدم الامتحان', 'success');
        }

        function exitExam() {
            if (confirm('سيتم حفظ تقدمك الحالي. هل تريد الخروج من الامتحان؟')) {
                saveExamProgress();
                returnToHome();
            }
        }

        function restartExam() {
            document.getElementById('examPage').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
            openLoginModal();
        }

        function returnToHome() {
            location.reload();
        }

        function showTimeWarning(message) {
            const warning = document.createElement('div');
            warning.className = 'temp-message warning';
            warning.innerHTML = `
                <i class="fas fa-exclamation-triangle"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(warning);
            
            setTimeout(() => warning.remove(), 5000);
        }

       // =============================================
// 2. مكتبة الأمثلة الكاملة (15 مثال)
// =============================================
const examplesLibrary = [
    {
        id: 1,
        title: "أساسيات الجمع والطرح",
        description: "عمليات حسابية بسيطة للمبتدئين",
        category: "مبتدئ",
        tags: ["حساب", "مبتدئ"],
        level: "beginner",
        code: `// العمليات الحسابية الأساسية
console.log("الجمع: 10 + 5 =", 10 + 5);
console.log("الطرح: 10 - 5 =", 10 - 5);
console.log("الضرب: 10 * 5 =", 10 * 5);
console.log("القسمة: 10 / 5 =", 10 / 5);
console.log("الباقي: 10 % 3 =", 10 % 3);`
    },
    {
        id: 2,
        title: "المتغيرات وأنواع البيانات",
        description: "تعريف واستخدام المتغيرات",
        category: "مبتدئ",
        tags: ["متغيرات", "أنواع"],
        level: "beginner",
        code: `// تعريف المتغيرات
let name = "أحمد";
const age = 25;
var city = "القاهرة";

console.log("الاسم:", name);
console.log("العمر:", age);
console.log("المدينة:", city);

// أنواع البيانات
let number = 100;
let text = "مرحباً";
let isStudent = true;
let fruits = ["تفاح", "موز", "برتقال"];
let person = { name: "سارة", age: 30 };

console.log("نوع الرقم:", typeof number);
console.log("نوع النص:", typeof text);
console.log("نوع المصفوفة:", typeof fruits);`
    },
    {
        id: 3,
        title: "الدوال البسيطة",
        description: "إنشاء واستدعاء الدوال",
        category: "مبتدئ",
        tags: ["دوال", "برمجة"],
        level: "beginner",
        code: `// دالة بسيطة
function greet(name) {
    return "مرحباً " + name + "!";
}

console.log(greet("محمد"));
console.log(greet("سارة"));

// دالة حسابية
function square(x) {
    return x * x;
}

console.log("مربع 8 هو:", square(8));
console.log("مربع 12 هو:", square(12));`
    },
    {
        id: 4,
        title: "المصفوفات الأساسية",
        description: "التعامل مع المصفوفات",
        category: "مبتدئ",
        tags: ["مصفوفات", "بيانات"],
        level: "beginner",
        code: `// إنشاء مصفوفة
let fruits = ["تفاح", "موز", "برتقال", "فراولة"];

console.log("المصفوفة:", fruits);
console.log("الطول:", fruits.length);
console.log("العنصر الأول:", fruits[0]);

// إضافة وإزالة
fruits.push("مانجو");
console.log("بعد إضافة مانجو:", fruits);

fruits.pop();
console.log("بعد إزالة آخر عنصر:", fruits);

// التكرار
console.log("عرض جميع الفواكه:");
for(let i = 0; i < fruits.length; i++) {
    console.log(i + 1 + ". " + fruits[i]);
}`
    },
    {
        id: 5,
        title: "الشروط الأساسية",
        description: "استخدام if و else",
        category: "مبتدئ",
        tags: ["شروط", "منطق"],
        level: "beginner",
        code: `// if بسيط
let age = 20;

if (age >= 18) {
    console.log("يمكنك التصويت");
} else {
    console.log("لا يمكنك التصويت");
}

// else if
let score = 85;

if (score >= 90) {
    console.log("ممتاز - A");
} else if (score >= 80) {
    console.log("جيد جداً - B");
} else if (score >= 70) {
    console.log("جيد - C");
} else {
    console.log("يحتاج تحسين");
}

// Ternary Operator
let temperature = 25;
let weather = temperature > 30 ? "حار" : "معتدل";
console.log("الجو:", weather);`
    },
    {
        id: 6,
        title: "الحلقات Loops",
        description: "استخدام for و while",
        category: "مبتدئ",
        tags: ["حلقات", "تكرار"],
        level: "beginner",
        code: `// for loop
console.log("الأرقام من 1 إلى 5:");
for(let i = 1; i <= 5; i++) {
    console.log("رقم:", i);
}

// while loop
console.log("العد التنازلي:");
let count = 5;
while(count > 0) {
    console.log(count);
    count--;
}

// for...of مع المصفوفات
let fruits = ["تفاح", "موز", "برتقال"];
console.log("عرض الفواكه:");
for(let fruit of fruits) {
    console.log("فاكهة:", fruit);
}

// break و continue
console.log("الأرقام من 1 إلى 10 (تخطي 5):");
for(let i = 1; i <= 10; i++) {
    if(i === 5) continue;
    console.log(i);
}`
    },
    {
        id: 7,
        title: "الكائنات Objects",
        description: "إنشاء واستخدام الكائنات",
        category: "متوسط",
        tags: ["كائنات", "بيانات"],
        level: "intermediate",
        code: `// إنشاء كائن
let person = {
    name: "أحمد",
    age: 30,
    city: "الإسكندرية",
    isStudent: false,
    
    // دالة داخل الكائن
    greet: function() {
        return "مرحباً، أنا " + this.name;
    }
};

console.log("الكائن:", person);
console.log("الاسم:", person.name);
console.log("العمر:", person['age']);
console.log(person.greet());

// إضافة خصائص جديدة
person.email = "ahmed@example.com";
console.log("بعد إضافة الإيميل:", person);

// التكرار على الخصائص
console.log("خصائص الكائن:");
for(let key in person) {
    if(typeof person[key] !== 'function') {
        console.log(key + ": " + person[key]);
    }
}`
    },
    {
        id: 8,
        title: "الدوال المتقدمة",
        description: "الدوال مع معاملات ودوال السهم",
        category: "متوسط",
        tags: ["دوال", "متقدم"],
        level: "intermediate",
        code: `// دالة مع معاملات متعددة
function calculate(num1, num2, operation) {
    switch(operation) {
        case '+':
            return num1 + num2;
        case '-':
            return num1 - num2;
        case '*':
            return num1 * num2;
        case '/':
            if(num2 === 0) return "لا يمكن القسمة على صفر";
            return num1 / num2;
        default:
            return "عملية غير صحيحة";
    }
}

console.log("10 + 5 =", calculate(10, 5, '+'));
console.log("10 * 5 =", calculate(10, 5, '*'));

// دالة السهم (Arrow Function)
const square = (x) => x * x;
console.log("مربع 9 هو:", square(9));

const sumArray = (arr) => {
    let total = 0;
    for(let num of arr) {
        total += num;
    }
    return total;
};

console.log("مجموع [1,2,3,4,5] هو:", sumArray([1,2,3,4,5]));

// دالة مع قيمة افتراضية
function greet(name = "زائر") {
    return "أهلاً وسهلاً " + name;
}

console.log(greet("محمود"));
console.log(greet());`
    },
    {
        id: 9,
        title: "المصفوفات المتقدمة",
        description: "الدوال المدمجة في المصفوفات",
        category: "متوسط",
        tags: ["مصفوفات", "متقدم"],
        level: "intermediate",
        code: `let numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

// map - تحويل المصفوفة
let squares = numbers.map(num => num * num);
console.log("مربعات الأرقام:", squares);

// filter - تصفية المصفوفة
let evenNumbers = numbers.filter(num => num % 2 === 0);
console.log("الأرقام الزوجية:", evenNumbers);

// reduce - جمع المصفوفة
let sum = numbers.reduce((total, num) => total + num, 0);
console.log("مجموع الأرقام:", sum);

// find - البحث في المصفوفة
let found = numbers.find(num => num > 5);
console.log("أول رقم أكبر من 5:", found);

// sort - ترتيب المصفوفة
let randomNumbers = [3, 1, 4, 1, 5, 9, 2, 6];
let sorted = randomNumbers.sort((a, b) => a - b);
console.log("الأرقام المرتبة:", sorted);`
    },
    {
        id: 10,
        title: "التعامل مع النصوص",
        description: "الدوال المدمجة في النصوص",
        category: "متوسط",
        tags: ["نصوص", "معالجة"],
        level: "intermediate",
        code: `let text = "مرحباً بك في عالم JavaScript";

console.log("طول النص:", text.length);
console.log("أحرف كبيرة:", text.toUpperCase());
console.log("أحرف صغيرة:", text.toLowerCase());
console.log("هل يحتوي على 'JavaScript'؟", text.includes("JavaScript"));
console.log("موقع كلمة 'عالم':", text.indexOf("عالم"));

// تقسيم النص
let words = text.split(" ");
console.log("الكلمات:", words);
console.log("عدد الكلمات:", words.length);

// استبدال النص
let newText = text.replace("JavaScript", "البرمجة");
console.log("النص الجديد:", newText);

// أخذ جزء من النص
console.log("الأول 7 أحرف:", text.substring(0, 7));`
    },
    {
        id: 11,
        title: "التاريخ والوقت",
        description: "التعامل مع Date object",
        category: "متوسط",
        tags: ["تاريخ", "وقت"],
        level: "intermediate",
        code: `// التاريخ الحالي
let now = new Date();
console.log("التاريخ الكامل:", now);
console.log("السنة:", now.getFullYear());
console.log("الشهر:", now.getMonth() + 1);
console.log("اليوم:", now.getDate());
console.log("الساعة:", now.getHours());
console.log("الدقائق:", now.getMinutes());
console.log("الثواني:", now.getSeconds());

// تنسيق التاريخ
let options = {
    weekday: 'long',
    year: 'numeric',
    month: 'long',
    day: 'numeric'
};
console.log("التاريخ المنسق:", now.toLocaleDateString('ar-SA', options));

// حساب الفرق بين تاريخين
let date1 = new Date(2024, 0, 1);
let date2 = new Date(2024, 11, 31);
let difference = date2 - date1;
let days = Math.floor(difference / (1000 * 60 * 60 * 24));
console.log("عدد الأيام بين 1 يناير و31 ديسمبر 2024:", days);`
    },
    {
        id: 12,
        title: "معالجة الأخطاء",
        description: "try...catch و throw",
        category: "متقدم",
        tags: ["أخطاء", "معالجة"],
        level: "advanced",
        code: `// try...catch الأساسي
try {
    console.log("بداية البرنامج");
    let result = 10 / 2;
    console.log("نتيجة القسمة:", result);
    
    // خطأ متعمد
    let x = y + 5;
    
} catch(error) {
    console.log("حدث خطأ!");
    console.log("الرسالة:", error.message);
}

console.log("البرنامج مستمر...");

// throw - خطأ مخصص
function divide(a, b) {
    if(b === 0) {
        throw new Error("لا يمكن القسمة على صفر");
    }
    return a / b;
}

try {
    console.log("10 / 2 =", divide(10, 2));
    console.log("10 / 0 =", divide(10, 0));
} catch(error) {
    console.log("خطأ في القسمة:", error.message);
}`
    },
    {
        id: 13,
        title: "الوعود Promises",
        description: "التعامل مع العمليات غير المتزامنة",
        category: "متقدم",
        tags: ["Promises", "غير متزامن"],
        level: "advanced",
        code: `// إنشاء Promise
let promise = new Promise((resolve, reject) => {
    console.log("جاري تنفيذ العملية...");
    
    setTimeout(() => {
        let success = Math.random() > 0.5;
        
        if(success) {
            resolve("تمت العملية بنجاح!");
        } else {
            reject("فشلت العملية");
        }
    }, 2000);
});

// استخدام Promise
promise
    .then(result => {
        console.log("النتيجة:", result);
    })
    .catch(error => {
        console.log("خطأ:", error);
    })
    .finally(() => {
        console.log("انتهت العملية");
    });`
    },
    {
        id: 14,
        title: "الفئات Classes",
        description: "البرمجة الكائنية في JavaScript",
        category: "متوسط",
        tags: ["Classes", "OOP"],
        level: "intermediate",
        code: `// تعريف class
class Person {
    constructor(name, age) {
        this.name = name;
        this.age = age;
    }
    
    greet() {
        return "مرحباً، أنا " + this.name + " وعمري " + this.age;
    }
}

// إنشاء كائن
let person1 = new Person("أحمد", 25);
console.log("الكائن:", person1);
console.log(person1.greet());

// الوراثة
class Student extends Person {
    constructor(name, age, major) {
        super(name, age);
        this.major = major;
    }
    
    study() {
        return "أدرس " + this.major;
    }
}

// إنشاء طالب
let student = new Student("سارة", 20, "علوم حاسب");
console.log("\\nالطالب:", student);
console.log(student.greet());
console.log(student.study());`
    },
    {
        id: 15,
        title: "حاسبة متكاملة",
        description: "مشروع كامل مع واجهة برمجة",
        category: "مشروع",
        tags: ["مشروع", "حاسبة", "كامل"],
        level: "advanced",
        code: `// حاسبة متكاملة
class Calculator {
    constructor() {
        this.history = [];
    }
    
    add(a, b) {
        const result = a + b;
        this.history.push(a + " + " + b + " = " + result);
        return result;
    }
    
    subtract(a, b) {
        const result = a - b;
        this.history.push(a + " - " + b + " = " + result);
        return result;
    }
    
    multiply(a, b) {
        const result = a * b;
        this.history.push(a + " × " + b + " = " + result);
        return result;
    }
    
    divide(a, b) {
        if(b === 0) {
            throw new Error("لا يمكن القسمة على صفر");
        }
        const result = a / b;
        this.history.push(a + " ÷ " + b + " = " + result);
        return result;
    }
    
    getHistory() {
        return this.history;
    }
}

// اختبار الحاسبة
console.log("=== حاسبة متكاملة ===");
const calc = new Calculator();

try {
    console.log("10 + 5 =", calc.add(10, 5));
    console.log("10 - 5 =", calc.subtract(10, 5));
    console.log("10 × 5 =", calc.multiply(10, 5));
    console.log("10 ÷ 5 =", calc.divide(10, 5));
    
    console.log("\\nسجل العمليات:");
    calc.getHistory().forEach((operation, index) => {
        console.log(index + 1 + ". " + operation);
    });
    
} catch(error) {
    console.log("\\nخطأ:", error.message);
}`
    }
];

        let isRunning = false;
        let executionTimeout = null;
        let isModalOpen = false;

        // تهيئة النظام
        document.addEventListener('DOMContentLoaded', function() {
            console.log("✅ مشغل JavaScript جاهز!");
            
            // إخفاء المحتوى الرئيسي مؤقتاً
            const mainContent = document.querySelector('.main-container');
            if (mainContent) {
                mainContent.style.opacity = '0';
            }
            
            // إخفاء زر تبديل الثيم مؤقتاً
            const themeToggle = document.querySelector('.theme-toggle-container');
            if (themeToggle) {
                themeToggle.style.opacity = '0';
            }
            
            // بدء شاشة الترحيب
            initializeWelcomeScreen();
            
            // تهيئة النظام بعد انتهاء الشاشة الترحيبية
            setTimeout(() => {
                initializeSystem();
                setupEventListeners();
                loadSavedCode();
                
                // إعداد زر الوضع الداكن
                const themeToggle = document.getElementById('themeToggle');
                if (themeToggle) {
                    themeToggle.addEventListener('click', function() {
                        const currentTheme = document.documentElement.getAttribute('data-theme');
                        const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                        document.documentElement.setAttribute('data-theme', newTheme);
                        localStorage.setItem('theme', newTheme);
                    });

                    // تحميل الثيم المحفوظ
                    const savedTheme = localStorage.getItem('theme') || 'light';
                    document.documentElement.setAttribute('data-theme', savedTheme);
                }
            }, 6000);
            
            // إعداد إغلاق النافذة عند النقر خارجها
            document.getElementById('loginModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeLoginModal();
                }
            });
        });

        function initializeWelcomeScreen() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            
            if (!welcomeScreen) return;
            
            // التحقق إذا كان المستخدم قد زار الموقع من قبل
            const hasVisitedBefore = localStorage.getItem('hasVisitedBefore');
            
            if (hasVisitedBefore) {
                setTimeout(() => hideWelcomeScreen(), 3000);
            } else {
                localStorage.setItem('hasVisitedBefore', 'true');
                setTimeout(() => hideWelcomeScreen(), 4000);
            }
            
            // تفاعل اللمس/النقر للاختفاء السريع
            welcomeScreen.addEventListener('click', hideWelcomeScreen);
            welcomeScreen.addEventListener('touchend', hideWelcomeScreen);
            
            // تفاعل لوحة المفاتيح للاختفاء السريع
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' || e.key === 'Enter' || e.key === ' ') {
                    hideWelcomeScreen();
                }
            });
        }

        function hideWelcomeScreen() {
            const welcomeScreen = document.getElementById('welcomeScreen');
            
            if (!welcomeScreen) return;
            
            welcomeScreen.classList.add('fade-out');
            
            setTimeout(() => {
                welcomeScreen.style.display = 'none';
                
                // إظهار المحتوى الرئيسي بسلاسة
                const mainContent = document.querySelector('.main-container');
                if (mainContent) {
                    mainContent.style.opacity = '0';
                    mainContent.style.display = 'block';
                    
                    setTimeout(() => {
                        mainContent.style.transition = 'opacity 0.8s ease';
                        mainContent.style.opacity = '1';
                    }, 100);
                }
                
                // إظهار زر تبديل الثيم بسلاسة
                const themeToggle = document.querySelector('.theme-toggle-container');
                if (themeToggle) {
                    themeToggle.style.opacity = '0';
                    setTimeout(() => {
                        themeToggle.style.transition = 'opacity 0.8s ease';
                        themeToggle.style.opacity = '1';
                    }, 300);
                }
                
            }, 800);
        }

        function initializeSystem() {
            adjustEditorSize();
            createExamplesModal();
            addExamplesButton();
            displayRandomExamples();
        }

        function setupEventListeners() {
            window.addEventListener('resize', adjustEditorSize);
            
            const codeInput = document.getElementById('code-input');
            if (codeInput) {
                codeInput.addEventListener('input', handleCodeInput);
                codeInput.addEventListener('blur', saveCurrentCode);
            }
            
            // اختصارات لوحة المفاتيح
            document.addEventListener('keydown', handleKeyboardShortcuts);
        }

        function adjustEditorSize() {
            const editor = document.getElementById('code-input');
            const output = document.querySelector('.output-body');
            
            if (!editor || !output) return;
            
            if (window.innerWidth < 768) {
                editor.style.minHeight = '250px';
                output.style.minHeight = '200px';
            } else {
                editor.style.minHeight = '300px';
                output.style.minHeight = '300px';
            }
        }

        function handleCodeInput() {
            const codeInput = document.getElementById('code-input');
            const statusElement = document.getElementById('status');
            
            if (!codeInput || !statusElement) return;
            
            statusElement.textContent = 'معدل';
            statusElement.style.color = '#f59e0b';
            
            const lines = codeInput.value.split('\n').length;
            const chars = codeInput.value.length;
            
            const statsElement = document.getElementById('codeStats');
            if (statsElement) {
                statsElement.textContent = `${lines} سطر, ${chars} حرف`;
            }
            
            saveCurrentCode();
        }

        function runCode() {
            if (isRunning) {
                showMessage('جاري تشغيل كود آخر...', 'error');
                return;
            }
            
            const codeInput = document.getElementById('code-input');
            const output = document.getElementById('output');
            
            if (!codeInput || !output) {
                showMessage('عناصر DOM غير موجودة', 'error');
                return;
            }
            
            const code = codeInput.value.trim();
            
            if (!code) {
                showMessage('اكتب بعض الكود أولاً!', 'error');
                return;
            }
            
            isRunning = true;
            updateStatus('جاري التشغيل...', '#f59e0b');
            
            if (executionTimeout) {
                clearTimeout(executionTimeout);
            }
            
            executionTimeout = setTimeout(() => {
                executeJavaScriptCode(code, output);
                isRunning = false;
                updateStatus('جاهز', '#10b981');
            }, 100);
        }

        function executeJavaScriptCode(code, outputElement) {
            try {
                const originalConsole = {
                    log: console.log,
                    error: console.error,
                    warn: console.warn,
                    info: console.info
                };
                
                const logs = [];
                const errors = [];
                const warnings = [];
                const infos = [];
                
                console.log = function(...args) {
                    logs.push({ type: 'log', args });
                    originalConsole.log.apply(console, args);
                };
                
                console.error = function(...args) {
                    errors.push({ type: 'error', args });
                    originalConsole.error.apply(console, args);
                };
                
                console.warn = function(...args) {
                    warnings.push({ type: 'warn', args });
                    originalConsole.warn.apply(console, args);
                };
                
                console.info = function(...args) {
                    infos.push({ type: 'info', args });
                    originalConsole.info.apply(console, args);
                };
                
                const result = eval(code);
                
                console.log = originalConsole.log;
                console.error = originalConsole.error;
                console.warn = originalConsole.warn;
                console.info = originalConsole.info;
                
                displayResults(logs, errors, warnings, infos, result, outputElement);
                showMessage('تم تنفيذ الكود بنجاح! ✅', 'success');
                
            } catch (error) {
                displayError(error, outputElement);
                showMessage('حدث خطأ أثناء التنفيذ ❌', 'error');
            }
        }

        function displayResults(logs, errors, warnings, infos, result, outputElement) {
            let html = '<div class="slide-in">';
            
            const allOutputs = [
                { data: logs, title: 'الإخراج', icon: 'check-circle', color: '#10b981', className: 'success' },
                { data: errors, title: 'الأخطاء', icon: 'exclamation-circle', color: '#ef4444', className: 'error' },
                { data: warnings, title: 'تحذيرات', icon: 'exclamation-triangle', color: '#f59e0b', className: 'warning' },
                { data: infos, title: 'معلومات', icon: 'info-circle', color: '#06b6d4', className: 'info' }
            ];
            
            allOutputs.forEach(outputType => {
                if (outputType.data.length > 0) {
                    html += `
                        <div class="temp-message ${outputType.className}">
                            <i class="fas fa-${outputType.icon}"></i>
                            <strong>${outputType.title} (${outputType.data.length})</strong>
                        </div>
                    `;
                    
                    outputType.data.forEach(item => {
                        html += `
                            <div class="output-line" style="border-left-color: ${outputType.color}">
                                ${item.args.map(arg => formatOutput(arg)).join(' ')}
                            </div>
                        `;
                    });
                }
            });
            
            html += '</div>';
            
            if (result !== undefined) {
                html += `
                    <div class="temp-message success">
                        <i class="fas fa-arrow-right"></i>
                        <strong>القيمة المعادة:</strong>
                        <div class="return-value">
                            ${formatOutput(result)}
                        </div>
                    </div>
                `;
            }
            
            outputElement.innerHTML = html;
            outputElement.scrollTop = 0;
        }

        function displayError(error, outputElement) {
            const html = `
                <div class="temp-message error">
                    <i class="fas fa-bug"></i>
                    <strong>حدث خطأ!</strong>
                    <p>${error.name}: ${error.message}</p>
                </div>
                
                <div class="error-details">
                    <strong>تفاصيل الخطأ:</strong>
                    <pre>${error.stack || 'لا توجد تفاصيل إضافية'}</pre>
                </div>
            `;
            
            outputElement.innerHTML = html;
        }

        function formatOutput(value) {
            if (value === null) return '<span class="null-value">null</span>';
            if (value === undefined) return '<span class="undefined-value">undefined</span>';
            
            const type = typeof value;
            
            switch (type) {
                case 'string':
                    return `<span class="string-value">"${value}"</span>`;
                
                case 'number':
                    return `<span class="number-value">${value}</span>`;
                
                case 'boolean':
                    return `<span class="boolean-value">${value}</span>`;
                
                case 'object':
                    if (Array.isArray(value)) {
                        const items = value.map(item => formatOutput(item)).join(', ');
                        return `[${items}]`;
                    }
                    
                    try {
                        return `<span class="object-value">${JSON.stringify(value)}</span>`;
                    } catch {
                        return `<span class="object-value">${String(value)}</span>`;
                    }
                
                default:
                    return String(value);
            }
        }

        function clearCode() {
            if (!confirm('هل تريد مسح الكود؟')) return;
            
            const codeInput = document.getElementById('code-input');
            const output = document.getElementById('output');
            
            if (!codeInput || !output) return;
            
            codeInput.value = '';
            
            output.innerHTML = `
                <div class="welcome-message">
                    <div class="message-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <div class="message-content">
                        <h3>مرحباً في مشغل JavaScript! 👋</h3>
                        <p>اكتب كود JavaScript في المحرر على اليسار واضغط على زر "تشغيل الكود" لتنفيذه.</p>
                        <p>يمكنك استخدام مكتبة الأمثلة لتحميل أمثلة جاهزة.</p>
                        <div class="tip">
                            <strong>💡 نصيحة:</strong> اضغط Ctrl+Enter لتشغيل الكود بسرعة
                        </div>
                    </div>
                </div>
                
                <div class="quick-examples">
                    <h4><i class="fas fa-bolt"></i> أمثلة سريعة</h4>
                    <div class="examples-grid">
                        <div class="example-item" onclick="loadQuickExample('calc')">
                            <i class="fas fa-calculator"></i>
                            <span>حساب</span>
                        </div>
                        <div class="example-item" onclick="loadQuickExample('loop')">
                            <i class="fas fa-sync-alt"></i>
                            <span>حلقات</span>
                        </div>
                        <div class="example-item" onclick="loadQuickExample('array')">
                            <i class="fas fa-list"></i>
                            <span>مصفوفات</span>
                        </div>
                        <div class="example-item" onclick="loadQuickExample('function')">
                            <i class="fas fa-function"></i>
                            <span>دوال</span>
                        </div>
                    </div>
                </div>
            `;
            
            showMessage('تم مسح المحرر', 'success');
            updateStatus('جاهز', '#10b981');
            localStorage.removeItem('lastCode');
        }

        function copyOutput() {
            const output = document.getElementById('output');
            if (!output) return;
            
            const text = output.innerText;
            navigator.clipboard.writeText(text).then(() => {
                showMessage('تم نسخ النتيجة إلى الحافظة', 'success');
            }).catch(err => {
                showMessage('تعذر نسخ النتيجة', 'error');
            });
        }

        function clearOutput() {
            const output = document.getElementById('output');
            if (!output) return;
            
            output.innerHTML = `
                <div class="temp-message info">
                    <i class="fas fa-info-circle"></i>
                    <strong>النتيجة نظيفة</strong>
                    <p>تشغيل كود جديد سيظهر النتائج هنا</p>
                </div>
            `;
        }

        function saveCurrentCode() {
            const codeInput = document.getElementById('code-input');
            if (!codeInput) return;
            
            const code = codeInput.value.trim();
            if (code) {
                try {
                    localStorage.setItem('lastCode', code);
                } catch (e) {
                    console.warn('تعذر حفظ الكود في localStorage:', e);
                }
            }
        }

        function loadSavedCode() {
            try {
                const savedCode = localStorage.getItem('lastCode');
                if (savedCode) {
                    const codeInput = document.getElementById('code-input');
                    if (codeInput) {
                        codeInput.value = savedCode;
                    }
                }
            } catch (e) {
                console.warn('تعذر تحميل الكود من localStorage:', e);
            }
        }

        function openExamplesModal() {
            const modal = document.getElementById('examplesModal');
            const container = document.getElementById('examplesContainer');
            
            if (!modal || !container) return;
            
            container.innerHTML = '';
            examplesLibrary.forEach((example, index) => {
                const card = createExampleCard(example, index);
                container.appendChild(card);
            });
            
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';
            modal.classList.add('fade-in');
            isModalOpen = true;
            
            setupExampleFilters();
        }

        function createExampleCard(example, index) {
            const card = document.createElement('div');
            card.className = 'example-card';
            card.dataset.exampleId = example.id;
            card.style.animationDelay = `${index * 0.1}s`;
            
            card.innerHTML = `
                <div class="card-content">
                    <div class="card-header">
                        <i class="fas fa-code"></i>
                        <h4>${example.title}</h4>
                    </div>
                    <p>${example.description}</p>
                    <div class="example-tags">
                        <span class="tag ${example.level}">${example.category}</span>
                        ${example.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                    </div>
                </div>
            `;
            
            card.addEventListener('click', function(e) {
                e.stopPropagation();
                selectExample(example);
            });
            
            return card;
        }

        function selectExample(example) {
            const codeInput = document.getElementById('code-input');
            if (!codeInput) return;
            
            codeInput.value = example.code;
            closeExamplesModal();
            
            showMessage(`تم تحميل مثال: ${example.title}`, 'success');
            updateStatus('معدل', '#f59e0b');
            saveCurrentCode();
        }

        function closeExamplesModal() {
            const modal = document.getElementById('examplesModal');
            if (!modal) return;
            
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            isModalOpen = false;
        }

        function setupExampleFilters() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            const searchInput = document.getElementById('exampleSearch');
            
            filterButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    filterButtons.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    filterExamples(this.dataset.filter);
                });
            });
            
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    searchExamples(this.value.toLowerCase());
                });
            }
        }

        function filterExamples(filter) {
            const cards = document.querySelectorAll('.example-card');
            
            cards.forEach(card => {
                const level = card.querySelector(`.tag.${filter}`) || 
                             card.querySelector(`.tag[class*="${filter}"]`);
                
                if (filter === 'all' || level) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }

        function searchExamples(query) {
            const cards = document.querySelectorAll('.example-card');
            
            cards.forEach(card => {
                const title = card.querySelector('h4').textContent.toLowerCase();
                const description = card.querySelector('p').textContent.toLowerCase();
                const tags = Array.from(card.querySelectorAll('.tag')).map(tag => tag.textContent.toLowerCase());
                
                const matches = title.includes(query) || 
                               description.includes(query) || 
                               tags.some(tag => tag.includes(query));
                
                card.style.display = matches ? 'block' : 'none';
            });
        }

        function loadRandomExample() {
            const randomIndex = Math.floor(Math.random() * examplesLibrary.length);
            const randomExample = examplesLibrary[randomIndex];
            selectExample(randomExample);
        }

        function loadQuickExample(type) {
            const quickExamples = {
                calc: `// مثال حسابي
console.log("10 + 5 =", 10 + 5);
console.log("20 - 8 =", 20 - 8);
console.log("6 × 7 =", 6 * 7);
console.log("100 / 4 =", 100 / 4);`,
                
                loop: `// مثال الحلقات
console.log("حلقة for:");
for(let i = 1; i <= 5; i++) {
    console.log("تكرار رقم", i);
}

console.log("\\nحلقة while:");
let count = 3;
while(count > 0) {
    console.log("العد التنازلي:", count);
    count--;
}`,
                
                array: `// مثال المصفوفات
let fruits = ["تفاح", "موز", "برتقال", "فراولة"];
console.log("الفواكه:", fruits);
console.log("العنصر الأول:", fruits[0]);
console.log("عدد العناصر:", fruits.length);

// إضافة عنصر جديد
fruits.push("مانجو");
console.log("بعد إضافة مانجو:", fruits);`,
                
                function: `// مثال الدوال
function greet(name) {
    return "مرحباً " + name;
}

function add(a, b) {
    return a + b;
}

console.log(greet("أحمد"));
console.log("5 + 3 =", add(5, 3));`
            };
            
            if (quickExamples[type]) {
                const codeInput = document.getElementById('code-input');
                codeInput.value = quickExamples[type];
                showMessage('تم تحميل المثال السريع', 'success');
                updateStatus('معدل', '#f59e0b');
                saveCurrentCode();
            }
        }

        function createExamplesModal() {
            if (document.getElementById('examplesModal')) return;
            
            setupModalCloseEvents();
        }

        function setupModalCloseEvents() {
            const modal = document.getElementById('examplesModal');
            if (!modal) return;
            
            const closeBtn = modal.querySelector('.modal-close');
            if (closeBtn) {
                closeBtn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    e.preventDefault();
                    closeExamplesModal();
                });
            }
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeExamplesModal();
                }
            });
        }

        function addExamplesButton() {
            // زر الأمثلة موجود بالفعل في HTML
        }

        function displayRandomExamples() {
            // الأمثلة السريعة موجودة بالفعل في HTML
        }

        function handleKeyboardShortcuts(e) {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                runCode();
                showMessage('تم تشغيل الكود (Ctrl+Enter)', 'success');
            }
            
            if ((e.ctrlKey || e.metaKey) && e.key === 'e') {
                e.preventDefault();
                openExamplesModal();
            }
            
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                saveCurrentCode();
                showMessage('تم حفظ الكود (Ctrl+S)', 'success');
            }
            
            if ((e.ctrlKey || e.metaKey) && e.key === 'l') {
                e.preventDefault();
                clearCode();
            }
            
            if (e.key === 'Escape') {
                if (isModalOpen) {
                    closeExamplesModal();
                }
                closeLoginModal();
            }
        }

        function updateStatus(text, color) {
            const statusElement = document.getElementById('status');
            if (!statusElement) return;
            
            statusElement.textContent = text;
            statusElement.style.color = color;
        }

        function showMessage(text, type = 'info') {
            // إزالة الرسائل القديمة
            const oldMessages = document.querySelectorAll('.temp-message');
            oldMessages.forEach(msg => {
                if (msg.parentNode) {
                    msg.parentNode.removeChild(msg);
                }
            });
            
            const message = document.createElement('div');
            message.className = `temp-message ${type}`;
            message.innerHTML = `
                <i class="fas fa-${getIcon(type)}"></i>
                <span>${text}</span>
            `;
            
            document.body.appendChild(message);
            
            setTimeout(() => {
                if (message.parentNode) {
                    message.remove();
                }
            }, 3000);
        }

        function getIcon(type) {
            const icons = {
                success: 'check-circle',
                error: 'exclamation-circle',
                warning: 'exclamation-triangle',
                info: 'info-circle'
            };
            return icons[type] || 'info-circle';
        }

        // جعل الدوال متاحة عالمياً
        window.runCode = runCode;
        window.openExamplesModal = openExamplesModal;
        window.closeExamplesModal = closeExamplesModal;
        window.clearCode = clearCode;
        window.saveCurrentCode = saveCurrentCode;
        window.copyOutput = copyOutput;
        window.clearOutput = clearOutput;
        window.loadQuickExample = loadQuickExample;
        window.loadRandomExample = loadRandomExample;
        window.selectAnswer = selectAnswer;
        window.submitExam = submitExam;
        window.saveExamProgress = saveExamProgress;
        window.exitExam = exitExam;
        window.restartExam = restartExam;
        window.returnToHome = returnToHome;
        window.openLoginModal = openLoginModal;
        window.closeLoginModal = closeLoginModal;

        console.log('🚀 النظام جاهز للعمل!');
    </script>
</body>
</html>